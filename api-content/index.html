{"posts":[{"title":"划船","content":"划船 由于涉及到绝对值，第一反应是将所有值放到数轴上，于是将船根据颜色从小到大排序放到数轴上，将人根据他们喜欢的颜色按从小到大排序放到另一条数轴上 我们将人对应他坐的船连线，不难证明，如果有连线交叉，将他们坐的船互换后，发现不高兴程度一定会更低，所以匹配线是类似平行的一些线段 对于处理这种不会对后面有影响的问题，可以考虑 dpdpdp，设置状态 dp[i][j]dp[i][j]dp[i][j] 为前 iii 艘船总共坐了 jjj 个人所产生的最小不高兴程度 可以枚举第 iii 艘船坐 kkk 个人，即可列出方程 dp[i][j]=max⁡k=j−yij(dp[i−1][k]+dp[i][j]=\\max\\limits_{k=j-y_i}^j({dp[i-1][k]}+dp[i][j]=k=j−yi​maxj​(dp[i−1][k]+第 k+1k+1k+1 个人到第 jjj 个人坐第 iii 艘船产生的不高兴程度 ))) 其中第 k+1k+1k+1 个人到第 jjj 个人坐第 iii 艘船产生的不高兴程度用前缀和优化，变成 sum[i][j]−sum[i][k]sum[i][j]-sum[i][k]sum[i][j]−sum[i][k]（sum[i][j]sum[i][j]sum[i][j] 为 1 j1~j1 j 个人都坐第 iii 艘船的不高兴程度总和） 于是 dpdpdp 式子变成 dp[i][j]=max⁡k=j−yij(dp[i−1][k]+sum[i][j]−sum[i][k])⟹dp[i][j]=max⁡k=j−yij(dp[i−1][k]−sum[i][k])+sum[i][j]dp[i][j]=\\max_{k=j-y_i}^j({dp[i-1][k]+sum[i][j]-sum[i][k]})\\Longrightarrow dp[i][j]=\\max_{k=j-y_i}^j({dp[i-1][k]-sum[i][k]})+sum[i][j] dp[i][j]=k=j−yi​maxj​(dp[i−1][k]+sum[i][j]−sum[i][k])⟹dp[i][j]=k=j−yi​maxj​(dp[i−1][k]−sum[i][k])+sum[i][j] 于是将 dp[i−1][k]−sum[i][k]dp[i-1][k]-sum[i][k]dp[i−1][k]−sum[i][k] 看做一个整体，发现这个东西可以单调队列来优化 于是可以单调队列直接求出 maxmaxmax 进行转移 上菜 ","link":"https://woshisb-river.github.io/post/hua-chuan/"},{"title":"简单操作","content":"题面 手玩几个例子可以发现，当存在奇环时，是无解的，所以判断原图是否是二分图来输出 −1-1−1 即可 于是原图就是一个二分图（二分图无奇环） 现在考虑最长链怎么算，我们发现如果答案链中有条边连接了两个不相邻的节点，即如下情况 我们会将中间的四元环缩起来（这边将35和46合并成为新点27），变成如下 此时链的长度变短，不符答案链最长，所以在答案链上没有边连接两个不相邻点，所以答案链就是两点之间的最短路 所以此题就是在每个连通块中找到此块中最长的两点最短路，最后求和即可 上菜 ","link":"https://woshisb-river.github.io/post/jian-dan-cao-zuo/"},{"title":"luogu P2791 幼儿园篮球题","content":"luogu P2791 幼儿园篮球题 快速阅读完题面，发现其实就是求下面这个式子： ∑i=1kCmiCn−mk−iiL\\sum\\limits_{i=1}^{k}{C_m^i C_{n-m}^{k-i} i^L} i=1∑k​Cmi​Cn−mk−i​iL 发现组合数其实可以递推预处理，麻烦的就是这个 iLi^LiL 式子 利用第二类斯特林数拆分一下 iL=∑j=0iCij{Lj}j!i^L=\\sum\\limits_{j=0}^i{C_i^j \\begin{Bmatrix}L\\\\j\\end{Bmatrix} j!} iL=j=0∑i​Cij​{Lj​}j! 代入进去变成 ∑i=1kCmiCn−mk−i∑j=0iCij{Lj}j!\\sum\\limits_{i=1}^{k}{C_m^i C_{n-m}^{k-i} \\sum\\limits_{j=0}^i{C_i^j \\begin{Bmatrix}L\\\\j\\end{Bmatrix} j!}} i=1∑k​Cmi​Cn−mk−i​j=0∑i​Cij​{Lj​}j! 把 ∑\\sum∑ 交换一下变成 ∑j=0k{Lj}j!∑i=jkCmiCn−mk−iCij\\sum\\limits_{j=0}^k{\\begin{Bmatrix}L\\\\j\\end{Bmatrix} j! \\sum\\limits_{i=j}^k{C_m^i C_{n-m}^{k-i} C_i^j}} j=0∑k​{Lj​}j!i=j∑k​Cmi​Cn−mk−i​Cij​ 通过 CmiCij=CmjCm−ji−jC_m^i C_i^j = C_m^j C_{m-j}^{i-j}Cmi​Cij​=Cmj​Cm−ji−j​ 这个式子将后面的三个组合数拿出来一个到前面 ∑j=0k{Lj}j!Cmj∑i=jkCm−ji−jCn−mk−i\\sum\\limits_{j=0}^k{\\begin{Bmatrix}L\\\\j\\end{Bmatrix} j! C_m^j \\sum\\limits_{i=j}^k{C_{m-j}^{i-j} C_{n-m}^{k-i}}} j=0∑k​{Lj​}j!Cmj​i=j∑k​Cm−ji−j​Cn−mk−i​ 我们换个元，设 t=i−jt=i-jt=i−j，则式子变为 ∑j=0k{Lj}j!Cmj∑t=0k−jCm−jtCn−mk−j−t\\sum\\limits_{j=0}^k{\\begin{Bmatrix}L\\\\j\\end{Bmatrix} j! C_m^j \\sum\\limits_{t=0}^{k-j}{C_{m-j}^t C_{n-m}^{k-j-t}}} j=0∑k​{Lj​}j!Cmj​t=0∑k−j​Cm−jt​Cn−mk−j−t​ 通过观察组合数和求和的次数，可以发现可以套用范德蒙德卷积化简 ∑i=0kCniCmk−i=Cn+mk⇒∑t=0k−jCm−jtCn−mk−j−t=Cn−jk−j\\sum\\limits_{i=0}^k{C_n^i C_m^{k-i}} = C_{n+m}^k \\Rightarrow \\sum\\limits_{t=0}^{k-j}{C_{m-j}^t C_{n-m}^{k-j-t}} = C_{n-j}^{k-j} i=0∑k​Cni​Cmk−i​=Cn+mk​⇒t=0∑k−j​Cm−jt​Cn−mk−j−t​=Cn−jk−j​ 所以式子化为 ∑j=0k{Lj}j!CmjCn−jk−j\\sum\\limits_{j=0}^k{\\begin{Bmatrix}L\\\\j\\end{Bmatrix} j! C_m^j C_{n-j}^{k-j}} j=0∑k​{Lj​}j!Cmj​Cn−jk−j​ 可以将第二类斯特林数和组合数预处理，然后不难发现上面枚举的 jjj 的上限是 min(k,L,m)=O(L)min(k,L,m)=O(L)min(k,L,m)=O(L)，所以每次询问复杂度为 O(L)O(L)O(L)，即可通过此题 ","link":"https://woshisb-river.github.io/post/luogu-p2791-you-er-yuan-lan-qiu-ti/"},{"title":"10.18","content":". ","link":"https://woshisb-river.github.io/post/1018/"}]}